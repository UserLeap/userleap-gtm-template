___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "UserLeap",
  "categories": ["ANALYTICS", "CONVERSIONS", "EMAIL_MARKETING", "EXPERIMENTATION", "SURVEY"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "UserLeap",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Tag template for the UserLeap Web SDK",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "envId",
    "displayName": "Environment ID",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const setInWindow = require('setInWindow');
const injectScript = require('injectScript');
const encodeUriComponent = require('encodeUriComponent');

const UserLeap = function(){UserLeap._queue.push(arguments);};

setInWindow('UserLeap', UserLeap);
setInWindow('UserLeap.appId', data.envId);
setInWindow('UserLeap._queue', []);

injectScript('https://cdn.userleap.com/shim.js?'+encodeUriComponent('id='+data.envId), data.gtmOnSuccess, data.gtmOnFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "UserLeap"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "UserLeap.appId"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "UserLeap._queue"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.userleap.com/shim.js*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 5/19/2020, 2:17:49 PM


